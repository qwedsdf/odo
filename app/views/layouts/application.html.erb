<!DOCTYPE html>
<html>
  <head>
    <title>Odo</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <meta http-equiv="content-type" charset="utf-8">
    <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
	  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  </head>

  <body>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="//code.jquery.com/jquery-1.12.1.min.js"></script>
    <header>
      <div class="header-outerFrame">
        <%= form_with(url:"/posts/notType/index",method: :get,local: true) do |f| %>
            <%= f.text_field :search_word %>
            <%= f.submit "検索" %>
        <%end%>
        <p><%= link_to("odotter","/",class: "header-odotter-letter") %></p>
        <% if @current_user == nil %>
          <p class="header-ruledLine common-letterColor-white">|<p/>
          <p><%= link_to("新規登録","/signup",class: "common-letterColor-white") %></p>
          <p class="header-ruledLine common-letterColor-white">|<p/>
          <p><%= link_to("ログイン","/login",class: "common-letterColor-white") %></p>
        <% else %>
          <p class="header-ruledLine common-letterColor-white">|<p/>
          <p><%= link_to("卍一覧","/posts/notType/index",class: "common-letterColor-white") %></p>
          <p class="header-ruledLine common-letterColor-white">|<p/>
          <p><%= link_to("卍する","/posts/0/new",class: "common-letterColor-white") %></p>
          <p class="header-ruledLine common-letterColor-white">|<p/>
          <%= link_to("/notice/looked",method: :post,class: "common-letterColor-white") do %><i class="far fa-bell notice-icon"><%= @new_notice.size %></i><% end %>
          <p class="header-ruledLine common-letterColor-white">|<p/>
          <p class="common-letterColor-white">貴様の名は暗黒漆黒破壊神ダークデストロイゴッド@<%=link_to(@current_user.name,"/users/edit",class: "common-letterColor-white") %></p>
          <p class="header-ruledLine common-letterColor-white">|<p/>
          <p><%= link_to("ログアウト","/logout",method: :post,class: "common-letterColor-white") %></p>
        <% end %>
      </div>
    </header>
    <% if flash[:notice] %>
      <div class="flash">
        <%= flash[:notice] %>
      </div>
    <% end %>
    <div class="notificationPanel">
      <ul>
        <% @notifications.each do |notice| %>
          <li><%= notice.user.name %>さんがあなたのツイートをいいねしました。<br><%= notice.post.content %></li>
        <% end %>
      <ul>
    </div>
    <%= yield %>
  </body>
</html>

<script type="text/javascript">
$(".notificationPanel").hide();
  var isShow = false;
  $(".notice-icon").click(function () {
    if (isShow){
      $(".notificationPanel").hide();
      isShow = false;
    } else {
      $(".notificationPanel").show();
      isShow = true;
    }
  });
</script>